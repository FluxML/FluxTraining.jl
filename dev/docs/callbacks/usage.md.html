<HTML><head><title>How to use callbacks</title><link href=../../template/hugobook.css rel=stylesheet ></link><link href=../../template/ansi.css rel=stylesheet ></link><meta content=Type=text/html; charset=utf-8 http-equiv=Content-Type ></meta></head><body><input onclick=toggleMenu() id=menu-control class=hidden toggle type=checkbox ></input><input id=toc-control type=checkbox class=hidden toggle ></input><main class=container flex ><aside id=menu-container class=book-menu ><nav class=book-menu-content ><h2 id=title >FluxTraining.jl</h2><div id=sidebar ><div class=doctree ><body><ul><li><p><a href=../../README.md.html title= >README</a></p></li><li><p><a href=../getting_started.md.html title= >Getting started</a></p></li><li><p><a href=../features.md.html title= >Features</a></p></li><li><p>Tutorials</p><ul><li><p><a href=../tutorials/mnist.ipynb.html title= >Training an image classifier</a></p></li><li><p><a href=../tutorials/hyperparameters.md.html title= >Hyperparameter scheduling</a></p></li><li><p><a href=custom.md.html title= >Custom callbacks</a></p></li><li><p><a href=../tutorials/training.md.html title= >Custom training loops</a></p></li></ul></li><li><p>How to</p><ul><li><p><a href=usage.md.html title= >Use callbacks</a></p></li><li><p><a href=tipstricks.md.html title= >Tips &amp; tricks</a></p></li></ul></li><li><p>Reference</p><ul><li><p><a href=../../REFERENCE.html title= >Docstrings</a></p></li><li><p><a href=reference.md.html title= >Callbacks</a></p></li><li><p><a href=../../CHANGELOG.md.html title= >Changelog</a></p></li></ul></li></ul></body></div></div></nav></aside><div class=book-page ><header class=book-header ></header><article><div result=false output=false class=cellcontainer cell=main lang=julia style=display:none ><pre result=false output=false class=codecell cell=main lang=julia style=display:none ><code>using FluxTraining
using FluxTraining: Callback, Read, Write, stateaccess
model, data, lossfn, optimizer = nothing, (), nothing, nothing
</code></pre></div><h1 id=how-to-use-callbacks >How to use callbacks</h1><p>Callbacks allow injecting functionality at many points during the training loop.</p><p>To use them, simply pass each callback to <code>Learner</code>:</p><div output=false class=cellcontainer cell=main lang=julia ><pre output=false class=codecell cell=main lang=julia ><code>learner = Learner(
    model, data, optimizer, lossfn,  # required arguments
    ToGPU(), Metrics(accuracy))      # pass any number of callbacks as additional arguments
</code></pre><pre class=coderesult ><code>Learner()</code></pre></div><p>Some useful callbacks are added by default:</p><div output=false class=cellcontainer cell=main lang=julia ><pre output=false class=codecell cell=main lang=julia ><code>learner.callbacks.cbs
</code></pre><pre class=coderesult ><code>6-element Vector{FluxTraining.SafeCallback}:
 ToDevice(Flux.gpu, Flux.gpu)
 Metrics(Loss(), Metric(Accuracy))
 ProgressPrinter()
 MetricsPrinter()
 StopOnNaNLoss()
 Recorder()</code></pre></div><p>See <a href=./reference.md.html title= >callback reference</a> for a list of all callbacks included in <em>FluxTraining.jl</em> and their documentation.</p><div class=admonition ><p>The order the callbacks are passed in doesnâ€™t matter. <em>FluxTraining.jl</em> creates a dependency graph that makes sure the callbacks are run in the correct order. Read <a href=./custom.md.html title= >custom callbacks</a> to find out how to create callbacks yourself.</p></div></article><footer class=book-footer ></footer></div><aside class=book-toc ><nav id=toc class=book-toc-content ><ul><li><a href=#how-to-use-callbacks >How to use callbacks</a><ul></ul></li></ul></nav></aside></main></body></HTML>