import{S as K,i as Q,s as X,F as Ie,e as w,w as S,k as T,c as b,a as I,x as $,d as _,m as C,b as v,L as N,g as k,J as g,y as W,M,G as ke,H as ye,I as Ee,q as E,o as D,B as L,r as U,N as De,D as se,O as Ve,l as G,z as Ae,A as Pe,f as ne,n as oe,P as Se,p as re,Q as Te,R as $e,v as ie,C as Ce,T as We,U as ae,V as ce,W as Le,t as q,h as H,j as ue,X as de,Y as fe,K as me,Z as he,_ as qe,$ as He,a0 as Oe}from"../../chunks/vendor-82c3ebfd.js";import{b as je}from"../../chunks/paths-4b3c6e7e.js";import{D as ze,c as Ne,a as _e,b as Re,d as Je,e as ve,T as ge,C as Me,H as Ue,f as Ge,g as Be}from"../../chunks/documentloader-3557a283.js";function Fe(r){let e,l,t,s,n,i,o,f,d;t=new ze({props:{title:r[3]}});const u=r[7].default,a=Ie(u,r,r[6],null);return{c(){e=w("div"),l=w("div"),S(t.$$.fragment),s=T(),n=w("div"),a&&a.c(),this.h()},l(c){e=b(c,"DIV",{class:!0,style:!0});var m=I(e);l=b(m,"DIV",{class:!0});var V=I(l);$(t.$$.fragment,V),V.forEach(_),s=C(m),n=b(m,"DIV",{class:!0,style:!0});var O=I(n);a&&a.l(O),O.forEach(_),m.forEach(_),this.h()},h(){v(l,"class","titlebar svelte-1tg6it9"),N(l,"collapsed",!r[2]),v(n,"class","document d svelte-1tg6it9"),v(n,"style",i=r[2]?"opacity: 0;":"opacity: 1;"),v(e,"class","viewer v svelte-1tg6it9"),v(e,"style",r[4]),N(e,"overlapped",r[1]),N(e,"collapsed",r[2])},m(c,m){k(c,e,m),g(e,l),W(t,l,null),g(e,s),g(e,n),a&&a.m(n,null),o=!0,f||(d=M(l,"click",r[8]),f=!0)},p(c,[m]){const V={};m&8&&(V.title=c[3]),t.$set(V),m&4&&N(l,"collapsed",!c[2]),a&&a.p&&(!o||m&64)&&ke(a,u,c,c[6],o?Ee(u,c[6],m,null):ye(c[6]),null),(!o||m&4&&i!==(i=c[2]?"opacity: 0;":"opacity: 1;"))&&v(n,"style",i),(!o||m&16)&&v(e,"style",c[4]),m&2&&N(e,"overlapped",c[1]),m&4&&N(e,"collapsed",c[2])},i(c){o||(E(t.$$.fragment,c),E(a,c),o=!0)},o(c){D(t.$$.fragment,c),D(a,c),o=!1},d(c){c&&_(e),L(t),a&&a.d(c),f=!1,d()}}}function Ke(r,e,l){let{$$slots:t={},$$scope:s}=e,{column:n=0}=e,{overlapped:i=!1}=e,{collapsed:o=!1}=e,{title:f}=e,{style:d}=e;U(Ne,n);const u=De(_e),a=c=>u.scrollTo(n);return r.$$set=c=>{"column"in c&&l(0,n=c.column),"overlapped"in c&&l(1,i=c.overlapped),"collapsed"in c&&l(2,o=c.collapsed),"title"in c&&l(3,f=c.title),"style"in c&&l(4,d=c.style),"$$scope"in c&&l(6,s=c.$$scope)},[n,i,o,f,d,u,s,t,a]}class Qe extends K{constructor(e){super();Q(this,e,Ke,Fe,X,{column:0,overlapped:1,collapsed:2,title:3,style:4})}}class Xe{constructor(e,l){this.viewerWidth=650,this.elemAttrs=se({scroll:0,size:2*this.viewerWidth}),this.documentIds=se(e),this.viewerWidth=l,this.viewerProps=this.makeViewerPropsStore()}connect(e){this.elem=e,this.updateElemAttrs()}updateElemAttrs(){this.elemAttrs.set({scroll:this.elem.scrollLeft,size:this.elem.clientWidth})}openDocument(e,l,t=!1){this.documentIds.update(s=>s.includes(e)?s:[...s.slice(0,l),e,...t?s.slice(l):[]])}scrollToDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);this.scrollTo(t)}return l})}closeDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);return[...l.slice(0,t),...l.slice(t+1)]}return l})}scrollTo(e){this.elem.scrollTo({left:e*this.viewerWidth+e*40})}reload(e){let l=[];this.documentIds.update(t=>(t.forEach(s=>{delete e.cache[s]}),l=t,[])),this.documentIds.set(l)}makeViewerPropsStore(){return Ve([this.elemAttrs,this.documentIds],([{scroll:e,size:l},t])=>{const s=this.viewerWidth,n=t.length,i=40;return t.map((o,f)=>{const d=Re(f,s,l,e);return{style:`width: ${s}px; max-width: ${s}px; left:${f*i}px ;right:${-s+i*(n-f)}px;`,documentId:o,overlapped:d<s,collapsed:d<=2*i,column:f}})})}}function pe(r,e,l){const t=r.slice();t[10]=e[l],t[14]=l;const s=t[10].documentId;t[11]=s;const n=t[1].getTitle(t[11]);return t[12]=n,t}function Ye(r){let e,l,t,s={ctx:r,current:null,token:null,hasCatch:!0,pending:lt,then:tt,catch:xe,value:15,error:16,blocks:[,,,]};return ce(l=r[1].load(r[11]),s),{c(){e=G(),s.block.c()},l(n){e=G(),s.block.l(n)},m(n,i){k(n,e,i),s.block.m(n,s.anchor=i),s.mount=()=>e.parentNode,s.anchor=e,t=!0},p(n,i){r=n,s.ctx=r,i&18&&l!==(l=r[1].load(r[11]))&&ce(l,s)||Le(s,r,i)},i(n){t||(E(s.block),t=!0)},o(n){for(let i=0;i<3;i+=1){const o=s.blocks[i];D(o)}t=!1},d(n){n&&_(e),s.block.d(n),s.token=null,s=null}}}function Ze(r){let e,l;return e=new ve({props:{views:ge,document:r[1].get(r[11])}}),{c(){S(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const n={};s&18&&(n.document=t[1].get(t[11])),e.$set(n)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function xe(r){let e,l,t,s;return t=new Me({props:{$$slots:{default:[et]},$$scope:{ctx:r}}}),{c(){e=w("p"),l=q("An error occured while loading this document: "),S(t.$$.fragment)},l(n){e=b(n,"P",{});var i=I(e);l=H(i,"An error occured while loading this document: "),$(t.$$.fragment,i),i.forEach(_)},m(n,i){k(n,e,i),g(e,l),W(t,e,null),s=!0},p(n,i){const o={};i&131090&&(o.$$scope={dirty:i,ctx:n}),t.$set(o)},i(n){s||(E(t.$$.fragment,n),s=!0)},o(n){D(t.$$.fragment,n),s=!1},d(n){n&&_(e),L(t)}}}function et(r){let e=r[11]+"",l,t,s=JSON.stringify(r[16])+"",n;return{c(){l=q(e),t=q(", "),n=q(s)},l(i){l=H(i,e),t=H(i,", "),n=H(i,s)},m(i,o){k(i,l,o),k(i,t,o),k(i,n,o)},p(i,o){o&16&&e!==(e=i[11]+"")&&ue(l,e),o&18&&s!==(s=JSON.stringify(i[16])+"")&&ue(n,s)},d(i){i&&_(l),i&&_(t),i&&_(n)}}}function tt(r){let e,l,t,s;return l=new ve({props:{document:r[15],views:ge}}),{c(){e=w("div"),S(l.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=I(e);$(l.$$.fragment,i),i.forEach(_),this.h()},h(){v(e,"class","loadeddocument")},m(n,i){k(n,e,i),W(l,e,null),s=!0},p(n,i){const o={};i&18&&(o.document=n[15]),l.$set(o)},i(n){s||(E(l.$$.fragment,n),t||de(()=>{t=fe(e,he,{duration:80}),t.start()}),s=!0)},o(n){D(l.$$.fragment,n),s=!1},d(n){n&&_(e),L(l)}}}function lt(r){let e,l,t;return{c(){e=w("p"),l=q("Loading")},l(s){e=b(s,"P",{});var n=I(e);l=H(n,"Loading"),n.forEach(_)},m(s,n){k(s,e,n),g(e,l)},p:me,i(s){t||de(()=>{t=fe(e,he,{duration:2e3}),t.start()})},o:me,d(s){s&&_(e)}}}function st(r){let e,l,t,s,n;const i=[Ze,Ye],o=[];function f(d,u){return u&18&&(e=null),e==null&&(e=!!d[1].hasDocument(d[11])),e?0:1}return l=f(r,-1),t=o[l]=i[l](r),{c(){t.c(),s=T()},l(d){t.l(d),s=C(d)},m(d,u){o[l].m(d,u),k(d,s,u),n=!0},p(d,u){let a=l;l=f(d,u),l===a?o[l].p(d,u):(oe(),D(o[a],1,1,()=>{o[a]=null}),re(),t=o[l],t?t.p(d,u):(t=o[l]=i[l](d),t.c()),E(t,1),t.m(s.parentNode,s))},i(d){n||(E(t),n=!0)},o(d){D(t),n=!1},d(d){o[l].d(d),d&&_(s)}}}function we(r,e){let l,t,s;const n=[e[10],{title:e[12]}];let i={$$slots:{default:[st]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=Ce(i,n[o]);return t=new Qe({props:i}),{key:r,first:null,c(){l=G(),S(t.$$.fragment),this.h()},l(o){l=G(),$(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,f){k(o,l,f),W(t,o,f),s=!0},p(o,f){e=o;const d=f&18?Ae(n,[f&16&&Pe(e[10]),{title:e[12]}]):{};f&131090&&(d.$$scope={dirty:f,ctx:e}),t.$set(d)},i(o){s||(E(t.$$.fragment,o),s=!0)},o(o){D(t.$$.fragment,o),s=!1},d(o){o&&_(l),L(t,o)}}}function nt(r){let e,l,t=[],s=new Map,n,i,o,f=r[4];const d=u=>u[10].documentId;for(let u=0;u<f.length;u+=1){let a=pe(r,f,u),c=d(a);s.set(c,t[u]=we(c,a))}return{c(){e=w("div"),l=w("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=b(u,"DIV",{class:!0});var a=I(e);l=b(a,"DIV",{class:!0,style:!0});var c=I(l);for(let m=0;m<t.length;m+=1)t[m].l(c);c.forEach(_),a.forEach(_),this.h()},h(){v(l,"class","inner viewers svelte-fi98vs"),ne(l,"width",r[0]*r[4].length+"px"),v(e,"class","outer svelte-fi98vs")},m(u,a){k(u,e,a),g(e,l);for(let c=0;c<t.length;c+=1)t[c].m(l,null);r[9](e),n=!0,i||(o=[M(window,"resize",r[7]),M(e,"scroll",r[8])],i=!0)},p(u,[a]){a&18&&(f=u[4],oe(),t=Se(t,a,d,1,u,f,s,l,We,we,null,pe),re()),(!n||a&17)&&ne(l,"width",u[0]*u[4].length+"px")},i(u){if(!n){for(let a=0;a<f.length;a+=1)E(t[a]);n=!0}},o(u){for(let a=0;a<t.length;a+=1)D(t[a]);n=!1},d(u){u&&_(e);for(let a=0;a<t.length;a+=1)t[a].d();r[9](null),i=!1,Te(o)}}}function ot(r,e,l){let t,{documentIds:s=[]}=e,{viewerwidth:n=700}=e,{loader:i}=e;const o=new Xe(s,n),f=o.viewerProps;$e(r,f,m=>l(4,t=m)),U(_e,o),U(Je,!0);let d;ie(()=>{o.connect(d)});const u=m=>o.updateElemAttrs(),a=m=>o.updateElemAttrs();function c(m){ae[m?"unshift":"push"](()=>{d=m,l(3,d)})}return r.$$set=m=>{"documentIds"in m&&l(6,s=m.documentIds),"viewerwidth"in m&&l(0,n=m.viewerwidth),"loader"in m&&l(1,i=m.loader)},[n,i,o,d,t,f,s,u,a,c]}class rt extends K{constructor(e){super();Q(this,e,ot,nt,X,{documentIds:6,viewerwidth:0,loader:1,viewcontrol:2})}get viewcontrol(){return this.$$.ctx[2]}}function it(r){if(window&&history){const e=new URLSearchParams;r.forEach(t=>{e.append("id",t)});const l=r.length>0?"?"+e.toString():"";history.pushState(null,"",l)}}function at(r){let e,l,t,s,n,i,o,f,d,u,a,c,m,V,O,P,j,B,R,z,F,Y;document.title=l=r[2].title,n=new Ue({props:{viewcontrol:r[4],loader:r[1],isInteractive:!0,documentId:r[3][0],config:r[2]}}),n.$on("resultSelected",r[5]);function be(h){r[7](h)}let Z={documentIds:r[0],loader:r[1],viewerwidth:r[2].columnWidth};return r[4]!==void 0&&(Z.viewcontrol=r[4]),f=new rt({props:Z}),ae.push(()=>qe(f,"viewcontrol",be)),{c(){e=T(),t=T(),s=w("div"),S(n.$$.fragment),i=T(),o=w("div"),S(f.$$.fragment),u=T(),a=w("div"),c=w("div"),m=w("p"),V=q("On a small screen, we recommend using the single-page viewer."),O=T(),P=w("a"),j=w("div"),B=q("Open in single-page viewer"),this.h()},l(h){e=C(h),He('[data-svelte="svelte-fbczdu"]',document.head).forEach(_),t=C(h),s=b(h,"DIV",{class:!0});var y=I(s);$(n.$$.fragment,y),i=C(y),o=b(y,"DIV",{class:!0});var A=I(o);$(f.$$.fragment,A),A.forEach(_),u=C(y),a=b(y,"DIV",{class:!0});var x=I(a);c=b(x,"DIV",{class:!0});var J=I(c);m=b(J,"P",{class:!0});var ee=I(m);V=H(ee,"On a small screen, we recommend using the single-page viewer."),ee.forEach(_),O=C(J),P=b(J,"A",{href:!0});var te=I(P);j=b(te,"DIV",{class:!0});var le=I(j);B=H(le,"Open in single-page viewer"),le.forEach(_),te.forEach(_),J.forEach(_),x.forEach(_),y.forEach(_),this.h()},h(){v(o,"class","interactive flex-grow items-stretch overflow-auto hidden md:flex"),v(m,"class","text-center text-gray-700"),v(j,"class","border-bluegray-200 text-bluegray-500 items-stretch grow bg-bluegray-100 border-2 p-1 rounded-lg text-center mt-8 hover:border-bluegray-300 hover:text-bluegray-700 hover:bg-bluegray-200"),v(P,"href",R=r[1].getHref(r[3][0])),v(c,"class","max-w-sm m-auto mt-10"),v(a,"class","flex md:hidden items-center"),v(s,"class","flex flex-col lg:flex-row max-w-full wrapper svelte-j761q5")},m(h,p){k(h,e,p),k(h,t,p),k(h,s,p),W(n,s,null),g(s,i),g(s,o),W(f,o,null),g(s,u),g(s,a),g(a,c),g(c,m),g(m,V),g(c,O),g(c,P),g(P,j),g(j,B),z=!0,F||(Y=M(document.body,"keydown",r[6]),F=!0)},p(h,[p]){(!z||p&4)&&l!==(l=h[2].title)&&(document.title=l);const y={};p&16&&(y.viewcontrol=h[4]),p&2&&(y.loader=h[1]),p&8&&(y.documentId=h[3][0]),p&4&&(y.config=h[2]),n.$set(y);const A={};p&1&&(A.documentIds=h[0]),p&2&&(A.loader=h[1]),p&4&&(A.viewerwidth=h[2].columnWidth),!d&&p&16&&(d=!0,A.viewcontrol=h[4],Oe(()=>d=!1)),f.$set(A),(!z||p&10&&R!==(R=h[1].getHref(h[3][0])))&&v(P,"href",R)},i(h){z||(E(n.$$.fragment,h),E(f.$$.fragment,h),z=!0)},o(h){D(n.$$.fragment,h),D(f.$$.fragment,h),z=!1},d(h){h&&_(e),h&&_(t),h&&_(s),L(n),L(f),F=!1,Y()}}}const mt=!0;async function ht({fetch:r,params:e}){console.log("Rendering INTERACTIVE");const{version:l}=e,t=[];let s;s=new Ge(je,l),s.fetch=r,console.log(s.getDataHref("attributes")),s.attributes=await s.load("attributes");const n=await s.load("config");return{props:{loader:s,documentIds:t,config:n}}}function ct(r,e,l){let{documentIds:t}=e,{loader:s}=e,{config:n}=e;U(Be,s);let i=[n.defaultDocument],o;ie(()=>{let c=new URLSearchParams(window.location.search).getAll("id");l(3,i=c.length>0?c:i),o.documentIds.set(i),o.documentIds.subscribe(it)});function f({detail:a}){o.documentIds.set([a])}const d=a=>"";function u(a){o=a,l(4,o)}return r.$$set=a=>{"documentIds"in a&&l(0,t=a.documentIds),"loader"in a&&l(1,s=a.loader),"config"in a&&l(2,n=a.config)},[t,s,n,i,o,f,d,u]}class _t extends K{constructor(e){super();Q(this,e,ct,at,X,{documentIds:0,loader:1,config:2})}}export{_t as default,ht as load,mt as prerender};
